import random
import streamlit as st

# Configuraci√≥n de la p√°gina
st.set_page_config(page_title="Tarot Chat", page_icon="üîÆ")

st.title("üîÆ Tarot Chat ‚Äî Lectura de 3 Cartas")
st.write("Haz tu pregunta o escribe el √°rea que quieras explorar (amor, energ√≠a, estudios, etc.) y te dar√© una lectura intuitiva de 3 cartas. ‚ú®")

# Tarot con significados base
tarot = {
    "El Loco": "nuevos comienzos, valent√≠a, energ√≠a fresca",
    "El Mago": "manifestaci√≥n, poder personal, claridad",
    "La Sacerdotisa": "intuici√≥n, misterio, gu√≠a espiritual",
    "La Emperatriz": "creatividad, amor propio, abundancia",
    "El Emperador": "estructura, orden, l√≠mites",
    "Los Enamorados": "decisiones del coraz√≥n, conexi√≥n profunda",
    "El Carro": "avance, determinaci√≥n, enfoque",
    "La Fuerza": "compasi√≥n, autocontrol, valent√≠a interna",
    "El Ermita√±o": "introspecci√≥n, b√∫squeda interior, reflexi√≥n",
    "La Rueda de la Fortuna": "cambios, destino, ciclos que giran",
    "La Justicia": "equilibrio, karma, claridad moral",
    "El Colgado": "pausa, rendici√≥n, nueva perspectiva",
    "La Muerte": "transformaci√≥n profunda, renacer",
    "La Templanza": "sanaci√≥n, armon√≠a, paciencia",
    "El Diablo": "apegos, tentaciones, patrones t√≥xicos",
    "La Torre": "verdades repentinas, liberaci√≥n",
    "La Estrella": "esperanza, gu√≠a, claridad espiritual",
    "La Luna": "intuici√≥n, emociones profundas, dudas",
    "El Sol": "√©xito, vitalidad, alegr√≠a",
    "El Juicio": "despertar, decisiones finales",
    "El Mundo": "cierre de ciclo, logro, plenitud"
}

def interpretar(carta, posici√≥n, pregunta):
    base = tarot[carta]

    if posici√≥n == "pasado":
        return f"**{carta}** en el *pasado*: vienes de una etapa marcada por {base}, lo cual influye en tu situaci√≥n actual respecto a **{pregunta}**."
    
    if posici√≥n == "presente":
        return f"**{carta}** en el *presente*: ahora est√°s atravesando energ√≠a de {base}, que es clave en tu situaci√≥n sobre **{pregunta}**."
    
    if posici√≥n == "futuro":
        return f"**{carta}** en el *futuro*: pronto se manifestar√° {base}, mostrando hacia d√≥nde se dirige tu camino en **{pregunta}**."

def mensaje_final(c1, c2, c3, pregunta):
    return (f"‚ú® **Mensaje final:** Tu lectura sobre **{pregunta}** muestra un viaje que comienza "
            f"con la energ√≠a de *{c1}*, se mueve a trav√©s de *{c2}* y te conduce hacia *{c3}*. "
            f"Todo indica un proceso natural de evoluci√≥n. Conf√≠a en los cambios y permanece abierta "
            f"a lo que el universo est√° alineando para ti.")

# Entrada del usuario (chat)
pregunta = st.text_input("üí¨ Pregunta o tema:")

if st.button("Leer mi tarot ‚ú®"):
    if pregunta.strip() == "":
        st.warning("Escribe una pregunta o un √°rea de vida ‚ù§Ô∏è")
    else:
        cartas = random.sample(list(tarot.keys()), 3)
        pasado, presente, futuro = cartas

        st.subheader("üîÆ Tu lectura:")

        st.write(interpretar(pasado, "pasado", pregunta))
        st.write(interpretar(presente, "presente", pregunta))
        st.write(interpretar(futuro, "futuro", pregunta))

        st.markdown("---")
        st.success(mensaje_final(pasado, presente, futuro, pregunta))
